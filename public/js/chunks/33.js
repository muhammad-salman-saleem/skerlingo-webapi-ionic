(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{213:function(t,e,a){"use strict";a.r(e);var i={data:function(){return{url:"importateurs",search:"",page_title:"Importateurs",headers:[{text:"Nom & prénom",align:"middle",value:"nomComplet"},{text:"Pays",align:"middle",value:"pays_label"},{text:"Email",align:"middle",value:"email"},{text:"Téléphone",align:"middle",value:"tel"},{text:"Etat du compte",align:"middle",value:"enabled"},{text:"Date d'inscription",align:"middle",value:"date"},{text:"",align:"right",value:"actions",sortable:!1}],filter:{type:null,ville:null},overlay:null,validationErrors:null,importateurs:[],selected_items:[],villes:[],types:[],importateur:{id:null,nom:null,prenom:null,tel:null,image:null,image_url:null,ville_id:null,enabled:null,email:null,villes_id:[]},edit:!1}},created:function(){this.fetch()},methods:{fetch:function(){this.$route.query.en_attente&&(this.filter.en_attente=!0,this.page_title="Importateurs en attente");var t={};$.each(this.filter,(function(e,a){t[e]=a})),axios.get(this.url,{params:t}).then(function(t){this.villes=t.data.villes,this.types=t.data.types,this.importateurs=t.data.importateurs}.bind(this)).catch((function(t){return console.log(t)}))},deleteLivreur:function(t){swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"question",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(function(e){var a=this;e.value&&axios.delete(this.url+"/"+t).then((function(t){swal.fire("Deleted!","Your file has been deleted.","success"),a.fetch()})).catch((function(t){return console.log(t)}))}.bind(this))},saveLivreur:function(){var t=this,e=new FormData;$.each(this.importateur,(function(t,a){e.append(t,a||"")})),axios.post(this.url,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t.clearForm(),$("#modal_form_importateur").modal("toggle"),t.fetch()})).catch((function(e){422==e.response.status&&(t.validationErrors=e.response.data.errors)}))},addLivreur:function(){this.clearForm(),this.validationErrors=null;new KTImageInput("kt_user_edit_avatar")},editLivreur:function(t){$("#modal_form_importateur").modal("toggle"),this.validationErrors=null,this.edit=!0;new KTImageInput("kt_user_edit_avatar");$.each(this.importateur,function(e,a){this.importateur[e]=t[e]}.bind(this))},clearForm:function(){this.edit=!1,$.each(this.importateur,function(t,e){this.importateur[t]=null}.bind(this))},onImageChange:function(t){this.importateur.image=t[0]},supprimer:function(){swal.fire({title:"Êtes-vous sûr ?",text:"Vous êtes sur le point de supprimer la sélection !",type:"question",showCancelButton:!0,confirmButtonText:"Supprimer",cancelButtonText:"Annuler"}).then(function(t){var e=this;if(t.value){this.overlay=!0;var a={};a.id=this.id,a.ids=this.selected_items.map((function(t){return t.id})),axios.post("importateurs/delete_importateurs",a).then(function(t){this.fiches=t.data.fiches,this.overlay=!1,this.selected_items=[],this.fetch(),swal.fire(t.data.title,t.data.message,t.data.icon)}.bind(this)).catch((function(t){e.overlay=!1,console.log("check error: ",e.error)}))}}.bind(this))}}},s=a(4),l=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.$auth.user().role_id?a("div",[a("div",{staticClass:"subheader py-2 py-lg-4 subheader-solid",attrs:{id:"kt_subheader"}},[a("div",{staticClass:"container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap"},[a("div",{staticClass:"d-flex align-items-center flex-wrap mr-2"},[a("h5",{staticClass:"text-dark font-weight-bold mt-2 mb-2 mr-5"},[t._v(t._s(t.page_title))]),t._v(" "),a("div",{staticClass:"d-flex align-items-center",attrs:{id:"kt_subheader_search"}},[a("span",{staticClass:"text-dark-50 font-weight-bold",attrs:{id:"kt_subheader_total"}},[t._v(t._s(t.importateurs.length)+" Importateurs")]),t._v(" "),a("form",{staticClass:"ml-5"},[a("div",{staticClass:"input-group input-group-sm input-group-solid",staticStyle:{"max-width":"175px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recherche..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("span",{staticClass:"svg-icon"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("path",{attrs:{d:"M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z",fill:"#000000","fill-rule":"nonzero",opacity:"0.3"}}),t._v(" "),a("path",{attrs:{d:"M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z",fill:"#000000","fill-rule":"nonzero"}})])])])])])])])])])])]),t._v(" "),a("div",{staticClass:"d-flex flex-column-fluid"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"card card-custom gutter-b",class:{"overlay overlay-block":t.overlay}},[a("div",{staticClass:"card-header flex-wrap pt-4 pb-4"},[a("div",{staticClass:"card-title"},[a("h3",{staticClass:"card-label d-flex"},[a("span",{staticClass:"mr-3"},[t._v("\n                "+t._s(t.page_title)+"\n                "),a("br"),t._v(" "),t.selected_items.length>0?a("span",{staticClass:"text-muted font-size-sm font-weight-normal"},[t._v(t._s(t.selected_items.length)+" selectionnées")]):t._e()]),t._v(" "),t.selected_items.length>0?a("div",{staticClass:"dropdown dropdown-inline"},[a("button",{staticClass:"btn btn-light-primary btn-sm dropdown-toggle",attrs:{disabled:0==t.selected_items.length,type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Actions")]),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-sm dropdown-menu-left font-weight-normal",staticStyle:{width:"300px"}},[a("ul",{staticClass:"navi flex-column navi-hover py-2 pl-0"},[a("li",{staticClass:"navi-item"},[a("a",{staticClass:"navi-link",attrs:{href:"#"},on:{click:function(e){return t.supprimer()}}},[t._m(0),t._v(" "),a("span",{staticClass:"navi-text"},[t._v("Supprimer la sélection")])])])])])]):t._e()])])]),t._v(" "),a("div",{staticClass:"overlay-wrapper"},[a("div",{staticClass:"card-body p-5 pt-0"},[a("v-card",{staticStyle:{"box-shadow":"none"}},[a("v-data-table",{staticClass:"table",attrs:{headers:t.headers,items:t.importateurs,search:t.search},scopedSlots:t._u([{key:"item.nomComplet",fn:function(e){var i=e.item;return[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(i.nomComplet))])]}},{key:"item.pays_label",fn:function(e){var i=e.item;return[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"symbol symbol-40 symbol-light-success mr-2"},[i.pays_flag?a("img",{attrs:{src:i.pays_flag,alt:""}}):t._e()]),t._v(" "),a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("span",{staticClass:"text-dark text-hover-primary font-size-sm font-weight-bold"},[t._v(t._s(i.pays_label))])])])]}},{key:"item.ville_label",fn:function(e){var i=e.item;return[a("span",{staticClass:"label label-outline-info label-inline"},[t._v(t._s(i.ville_label))])]}},{key:"item.enabled",fn:function(e){var i=e.item;return[i.enabled?a("span",{staticClass:"label label-lg label-primary label-inline font-weight-normal"},[t._v("Compte actif")]):t._e(),t._v(" "),i.enabled?t._e():a("span",{staticClass:"label label-lg label-danger label-inline font-weight-normal"},[t._v("Compte bloqué")])]}},{key:"item.date",fn:function(e){var i=e.item;return[a("span",{staticClass:"font-roboto"},[t._v(t._s(i.date))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[a("router-link",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{to:{name:"importateur_profile",params:{id:i.id}}}},[a("span",{staticClass:"svg-icon svg-icon-md svg-icon-success"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("polygon",{attrs:{points:"0 0 24 0 24 24 0 24"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",opacity:"0.5",transform:"translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000)",x:"11",y:"5",width:"2",height:"14",rx:"1"}}),t._v(" "),a("path",{attrs:{d:"M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z",fill:"#000000","fill-rule":"nonzero",transform:"translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997)"}})])])])])]}}],null,!1,4264225370)})],1)],1)]),t._v(" "),t.overlay?a("div",{staticClass:"overlay-layer bg-dark-o-10"},[a("div",{staticClass:"spinner spinner-primary"})]):t._e()])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_form_importateur",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t.importateur.id?t._e():a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Ajouter un importateur")]),t._v(" "),t.importateur.id?a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Modifier un importateur")]):t._e(),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}})]),t._v(" "),a("form",{staticClass:"mb-3",on:{submit:function(e){return e.preventDefault(),t.saveLivreur(e)}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group mt-2 text-center"},[a("div",{staticClass:"image-input image-input-empty image-input-outline",style:{"background-image":"url("+t.importateur.image_url+")"},attrs:{id:"kt_user_edit_avatar"}},[a("div",{staticClass:"image-input-wrapper"}),t._v(" "),a("label",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"change","data-toggle":"tooltip",title:"","data-original-title":"Change avatar"}},[a("i",{staticClass:"fa fa-pen icon-sm text-muted"}),t._v(" "),a("input",{attrs:{type:"file",name:"profile_avatar",accept:".png, .jpg, .jpeg"},on:{change:t.onImageChange}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"profile_avatar_remove"}})]),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group mb-0"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Nom :")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importateur.nom,expression:"importateur.nom"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"off",placeholder:"Nom"},domProps:{value:t.importateur.nom},on:{input:function(e){e.target.composing||t.$set(t.importateur,"nom",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group mb-0"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Prénom :")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importateur.prenom,expression:"importateur.prenom"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"off",placeholder:"Prénom"},domProps:{value:t.importateur.prenom},on:{input:function(e){e.target.composing||t.$set(t.importateur,"prenom",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group mb-0"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("GSM")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importateur.tel,expression:"importateur.tel"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"off",placeholder:"GSM"},domProps:{value:t.importateur.tel},on:{input:function(e){e.target.composing||t.$set(t.importateur,"tel",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group mb-0"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importateur.email,expression:"importateur.email"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"off",placeholder:"Emaill"},domProps:{value:t.importateur.email},on:{input:function(e){e.target.composing||t.$set(t.importateur,"email",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"form-group mb-2 mt-2"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Ville de résidence :")]),t._v(" "),a("v-autocomplete",{attrs:{items:t.villes,clearable:"",dense:"",filled:""},model:{value:t.importateur.ville_id,callback:function(e){t.$set(t.importateur,"ville_id",e)},expression:"importateur.ville_id"}})],1),t._v(" "),a("div",{staticClass:"form-group d-none"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Zones de couverture :")]),t._v(" "),a("v-autocomplete",{attrs:{items:t.villes,clearable:"",dense:"",multiple:"","small-chips":"",filled:""},model:{value:t.importateur.villes_id,callback:function(e){t.$set(t.importateur,"villes_id",e)},expression:"importateur.villes_id"}})],1),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("div",{staticClass:"checkbox-inline mb-2"},[a("label",{staticClass:"checkbox checkbox-lg"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.importateur.enabled,expression:"importateur.enabled"}],attrs:{type:"checkbox",name:"enabled"},domProps:{checked:Array.isArray(t.importateur.enabled)?t._i(t.importateur.enabled,null)>-1:t.importateur.enabled},on:{change:function(e){var a=t.importateur.enabled,i=e.target,s=!!i.checked;if(Array.isArray(a)){var l=t._i(a,null);i.checked?l<0&&t.$set(t.importateur,"enabled",a.concat([null])):l>-1&&t.$set(t.importateur,"enabled",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(t.importateur,"enabled",s)}}}),t._v(" "),a("span"),t._v("Son compte est-il actif ?\n                ")])])]),t._v(" "),t.validationErrors?a("validation-errors",{attrs:{errors:t.validationErrors}}):t._e()],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.clearForm()}}},[t._v("Fermer")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enregistrer")])])])])])])]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"navi-icon"},[e("i",{staticClass:"flaticon-delete"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"cancel","data-toggle":"tooltip",title:"Cancel avatar"}},[e("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"remove","data-toggle":"tooltip",title:"Remove avatar"}},[e("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])}],!1,null,null,null);e.default=l.exports}}]);