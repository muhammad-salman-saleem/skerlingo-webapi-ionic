(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{216:function(t,e,a){"use strict";a.r(e);var i={data:function(){return{url:"livreurs",search:"",headers:[{text:"Livreur",align:"middle",value:"nomComplet"},{text:"Email",align:"middle",value:"email"},{text:"Téléphone",align:"middle",value:"tel"},{text:"Ville",align:"middle",value:"ville_label"},{text:"Date d'inscription",align:"middle",value:"date"},{text:"",align:"right",value:"actions",sortable:!1}],validationErrors:null,livreurs:[],villes:[],livreur:{id:null,ville_id:null,raison_sociale:null,adresse:null},edit:!1}},created:function(){this.fetch()},methods:{fetch:function(){var t={en_attente:!0};axios.get(this.url,{params:t}).then(function(t){this.villes=t.data.villes,this.livreurs=t.data.livreurs}.bind(this)).catch((function(t){return console.log(t)}))},deleteLivreur:function(t){swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"question",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(function(e){var a=this;e.value&&axios.delete(this.url+"/"+t).then((function(t){swal.fire("Deleted!","Your file has been deleted.","success"),a.fetch()})).catch((function(t){return console.log(t)}))}.bind(this))},saveLivreur:function(){var t=this,e=new FormData;$.each(this.livreur,(function(t,a){e.append(t,a)})),axios.post(this.url,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t.clearForm(),$("#modal_form_livreur").modal("toggle"),t.fetch()})).catch((function(e){422==e.response.status&&(t.validationErrors=e.response.data.errors)}))},addLivreur:function(){this.clearForm(),this.validationErrors=null},editLivreur:function(t){$("#modal_form_livreur").modal("toggle"),this.validationErrors=null,this.edit=!0,$.each(this.livreur,function(e,a){this.livreur[e]=t[e]}.bind(this))},clearForm:function(){this.edit=!1,$.each(this.livreur,function(t,e){this.livreur[t]=null}.bind(this))},onImageChange:function(t){this.livreur.image=t[0]}}},s=a(4),r=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"subheader py-2 py-lg-4 subheader-solid",attrs:{id:"kt_subheader"}},[a("div",{staticClass:"container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap"},[a("div",{staticClass:"d-flex align-items-center flex-wrap mr-2"},[a("h5",{staticClass:"text-dark font-weight-bold mt-2 mb-2 mr-5"},[t._v("Livreurs en attente")]),t._v(" "),a("div",{staticClass:"d-flex align-items-center",attrs:{id:"kt_subheader_search"}},[a("span",{staticClass:"text-dark-50 font-weight-bold",attrs:{id:"kt_subheader_total"}},[t._v(t._s(t.livreurs.length)+" Livreurs")]),t._v(" "),a("form",{staticClass:"ml-5"},[a("div",{staticClass:"input-group input-group-sm input-group-solid",staticStyle:{"max-width":"175px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recherche..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("span",{staticClass:"svg-icon"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),a("path",{attrs:{d:"M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z",fill:"#000000","fill-rule":"nonzero",opacity:"0.3"}}),t._v(" "),a("path",{attrs:{d:"M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z",fill:"#000000","fill-rule":"nonzero"}})])])])])])])])])])])]),t._v(" "),a("div",{staticClass:"d-flex flex-column-fluid"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"card card-custom gutter-b"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body p-5 pt-0"},[a("v-card",{staticStyle:{"box-shadow":"none"}},[a("v-data-table",{staticClass:"table",attrs:{headers:t.headers,items:t.livreurs,search:t.search},scopedSlots:t._u([{key:"item.nomComplet",fn:function(e){var i=e.item;return[a("span",{staticClass:"font-weight-bold"},[t._v("\n                  "+t._s(i.nomComplet)+"\n                ")])]}},{key:"item.ville_label",fn:function(e){var i=e.item;return[a("span",{staticClass:"label label-lg label-light-primary label-inline font-weight-normal"},[t._v(t._s(i.ville_label))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[a("router-link",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{to:{name:"livreur_profile",params:{id:i.id}}}},[a("span",{staticClass:"svg-icon svg-icon-md svg-icon-success"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[a("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("polygon",{attrs:{points:"0 0 24 0 24 24 0 24"}}),t._v(" "),a("rect",{attrs:{fill:"#000000",opacity:"0.5",transform:"translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000)",x:"11",y:"5",width:"2",height:"14",rx:"1"}}),t._v(" "),a("path",{attrs:{d:"M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z",fill:"#000000","fill-rule":"nonzero",transform:"translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997)"}})])])])])]}},{key:"item.date",fn:function(e){var i=e.item;return[a("span",[t._v(t._s(i.date))])]}}])})],1)],1)])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal_form_livreur",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t.livreur.id?t._e():a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Ajouter un livreur")]),t._v(" "),t.livreur.id?a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Modifier un livreur")]):t._e(),t._v(" "),t._m(1)]),t._v(" "),a("form",{staticClass:"mb-3",on:{submit:function(e){return e.preventDefault(),t.saveLivreur(e)}}},[a("div",{staticClass:"modal-body"},[t.validationErrors?a("validation-errors",{attrs:{errors:t.validationErrors}}):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Nom commercial :")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.livreur.raison_sociale,expression:"livreur.raison_sociale"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nom commercial"},domProps:{value:t.livreur.raison_sociale},on:{input:function(e){e.target.composing||t.$set(t.livreur,"raison_sociale",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Adresse :")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.livreur.adresse,expression:"livreur.adresse"}],staticClass:"form-control",attrs:{rows:"2"},domProps:{value:t.livreur.adresse},on:{input:function(e){e.target.composing||t.$set(t.livreur,"adresse",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Ville :")]),t._v(" "),a("v-autocomplete",{attrs:{items:t.villes,clearable:"",dense:"",filled:""},model:{value:t.livreur.ville_id,callback:function(e){t.$set(t.livreur,"ville_id",e)},expression:"livreur.ville_id"}})],1)],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.clearForm()}}},[t._v("Fermer")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enregistrer")])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("div",{staticClass:"card-title"},[e("h3",{staticClass:"card-label"},[this._v("Livreurs en attente")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("i",{staticClass:"ki ki-close",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null);e.default=r.exports}}]);