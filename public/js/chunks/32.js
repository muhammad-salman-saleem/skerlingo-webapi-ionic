(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{207:function(t,e,s){"use strict";s.r(e);function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i={data:function(){var t;return a(t={url:"groupes/"+this.$route.params.id,search:"",headers:[{text:"Exportateur",align:"middle",value:"entite_label"},{text:"Date",align:"middle",value:"date"},{text:"",align:"right",value:"actions",sortable:!1}]},"search",""),a(t,"validationErrors",null),a(t,"groupe",[]),a(t,"trakings",[]),a(t,"entreprises",[]),a(t,"entites",[]),a(t,"groupe",null),a(t,"traking",{id:null,groupe_id:null,entite_id:null,commentaire:null}),a(t,"edit",!1),t},created:function(){this.fetch()},methods:{fetch:function(){axios.get(this.url).then(function(t){this.groupe=t.data.groupe,this.trakings=t.data.trakings,this.entreprises=t.data.entreprises,this.entites=t.data.entites}.bind(this)).catch((function(t){return console.log(t)}))},trakingForm:function(){var t=this;this.traking.groupe_id=this.groupe.id;var e=new FormData;$.each(this.traking,(function(t,s){e.append(t,s)})),axios.post("groupes/traking_form",e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t.clearForm(),t.fetch()})).catch((function(e){422==e.response.status&&(t.validationErrors=e.response.data.errors)}))},clearForm:function(){this.edit=!1,$.each(this.traking,function(t,e){this.traking[t]=null}.bind(this))},deleteEntite:function(t){swal.fire({title:"Êtes-vous sûr ?",text:"Vous êtes sur le point de désaffecter cette entité !",type:"question",showCancelButton:!0,confirmButtonText:"Désaffecter",cancelButtonText:"Annuler"}).then(function(e){var s=this;e.value&&axios.get("groupes/delete_entite/"+t).then((function(t){s.fetch(),swal.fire("Entité désaffectée !","L'entité a été désaffectée avec succés.","success")})).catch((function(t){return console.log(t)}))}.bind(this))}}},r=s(4),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"subheader py-2 py-lg-4 subheader-solid",attrs:{id:"kt_subheader"}},[s("div",{staticClass:"container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap"},[s("div",{staticClass:"d-flex align-items-center flex-wrap mr-2"},[s("h5",{staticClass:"text-dark font-weight-bold mt-2 mb-2 mr-5"},[t._v("Détails groupe")]),t._v(" "),s("div",{staticClass:"subheader-separator subheader-separator-ver mt-2 mb-2 mr-5 bg-gray-200"}),t._v(" "),s("ul",{staticClass:"breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 mr-3 font-size-sm"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-muted",attrs:{to:"/groupes"}},[t._v("Groupes")])],1)]),t._v(" "),t.groupe?s("div",{staticClass:"d-flex align-items-center",attrs:{id:"kt_subheader_search"}},[s("span",{staticClass:"text-dark-50 font-weight-bold",attrs:{id:"kt_subheader_total"}},[t._v("#"+t._s(t.groupe.id))])]):t._e()])])]),t._v(" "),t.groupe?s("div",{staticClass:"d-flex flex-column-fluid"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5"},[1==t.$auth.user().role_id?s("div",{staticClass:"card card-custom gutter-b"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"flex-shrink-0 mr-7"},[s("div",{staticClass:"symbol symbol-80 symbol-light-success mr-2"},[s("img",{attrs:{src:t.groupe.groupe_image,alt:""}})])]),t._v(" "),s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap"},[s("div",{staticClass:"mr-3"},[s("div",{staticClass:"d-flex align-items-center mr-3"},[s("a",{staticClass:"d-flex align-items-center text-dark text-hover-primary font-size-h5 font-weight-bold mr-3",attrs:{href:"#"}},[t._v(t._s(t.groupe.label))])]),t._v(" "),s("div",{staticClass:"d-flex flex-wrap my-2"},[s("a",{staticClass:"text-muted text-hover-primary font-weight-bold mr-lg-8 mr-5 mb-lg-0 mb-2",attrs:{href:"#"}},[s("span",{staticClass:"svg-icon svg-icon-md svg-icon-gray-500 mr-1"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[s("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),s("path",{attrs:{d:"M18,2 L20,2 C21.6568542,2 23,3.34314575 23,5 L23,19 C23,20.6568542 21.6568542,22 20,22 L18,22 L18,2 Z",fill:"#000000",opacity:"0.3"}}),t._v(" "),s("path",{attrs:{d:"M5,2 L17,2 C18.6568542,2 20,3.34314575 20,5 L20,19 C20,20.6568542 18.6568542,22 17,22 L5,22 C4.44771525,22 4,21.5522847 4,21 L4,3 C4,2.44771525 4.44771525,2 5,2 Z M12,11 C13.1045695,11 14,10.1045695 14,9 C14,7.8954305 13.1045695,7 12,7 C10.8954305,7 10,7.8954305 10,9 C10,10.1045695 10.8954305,11 12,11 Z M7.00036205,16.4995035 C6.98863236,16.6619875 7.26484009,17 7.4041679,17 C11.463736,17 14.5228466,17 16.5815,17 C16.9988413,17 17.0053266,16.6221713 16.9988413,16.5 C16.8360465,13.4332455 14.6506758,12 11.9907452,12 C9.36772908,12 7.21569918,13.5165724 7.00036205,16.4995035 Z",fill:"#000000"}})])])]),t._v("\n                          "+t._s(t.groupe.count)+" exportateurs\n                        ")]),t._v(" "),s("a",{staticClass:"text-muted text-hover-primary font-weight-bold mr-lg-8 mr-5 mb-lg-0 mb-2 mt-2",attrs:{href:"#"}},[s("span",{staticClass:"svg-icon svg-icon-md svg-icon-gray-500 mr-1"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[s("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),s("path",{attrs:{d:"M8.43296491,7.17429118 L9.40782327,7.85689436 C9.49616631,7.91875282 9.56214077,8.00751728 9.5959027,8.10994332 C9.68235021,8.37220548 9.53982427,8.65489052 9.27756211,8.74133803 L5.89079566,9.85769242 C5.84469033,9.87288977 5.79661753,9.8812917 5.74809064,9.88263369 C5.4720538,9.8902674 5.24209339,9.67268366 5.23445968,9.39664682 L5.13610134,5.83998177 C5.13313425,5.73269078 5.16477113,5.62729274 5.22633424,5.53937151 C5.384723,5.31316892 5.69649589,5.25819495 5.92269848,5.4165837 L6.72910242,5.98123382 C8.16546398,4.72182424 10.0239806,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 C7.581722,20 4,16.418278 4,12 L6,12 C6,15.3137085 8.6862915,18 12,18 C15.3137085,18 18,15.3137085 18,12 C18,8.6862915 15.3137085,6 12,6 C10.6885336,6 9.44767246,6.42282109 8.43296491,7.17429118 Z",fill:"#000000","fill-rule":"nonzero"}})])])]),t._v("\n                          "+t._s(t.groupe.date_update)+"\n                        ")])])])])])])])]):t._e(),t._v(" "),s("div",{staticClass:"card card-custom"},[s("div",{staticClass:"card-header h-auto py-4"},[t._m(0),t._v(" "),s("div",{staticClass:"d-flex align-items-center"},[s("form",{staticClass:"ml-5"},[s("div",{staticClass:"input-group input-group-sm input-group-solid",staticStyle:{"max-width":"175px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recherche..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[s("span",{staticClass:"svg-icon"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[s("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),s("path",{attrs:{d:"M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z",fill:"#000000","fill-rule":"nonzero",opacity:"0.3"}}),t._v(" "),s("path",{attrs:{d:"M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z",fill:"#000000","fill-rule":"nonzero"}})])])])])])])])])]),t._v(" "),s("div",{staticClass:"card-body p-0"},[s("v-card",{staticStyle:{"box-shadow":"none"}},[s("v-data-table",{staticClass:"table",attrs:{headers:t.headers,items:t.entites,search:t.search},scopedSlots:t._u([{key:"item.label",fn:function(e){var a=e.item;return[s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.label))])]}},{key:"item.code",fn:function(e){var a=e.item;return[s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.code))])]}},{key:"item.actions",fn:function(e){var a=e.item;return[s("a",{staticClass:"btn btn-icon btn-light btn-hover-primary btn-sm",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.deleteEntite(a.id)}}},[s("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[s("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),t._v(" "),s("path",{attrs:{d:"M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z",fill:"#000000","fill-rule":"nonzero"}}),t._v(" "),s("path",{attrs:{d:"M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z",fill:"#000000",opacity:"0.3"}})])])])])]}}],null,!1,3926562877)})],1)],1)])]),t._v(" "),s("div",{staticClass:"col-xl-7"},[s("div",{staticClass:"card card-custom gutter-b"},[t._m(1),t._v(" "),s("div",{staticClass:"card-body px-0"},[s("div",{staticClass:"tab-content pt-5"},[s("div",{staticClass:"tab-pane active",attrs:{id:"kt_apps_contacts_view_tab_1",role:"tabpanel"}},[s("div",{staticClass:"container"},[1==t.$auth.user().role_id?s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.trakingForm(e)}}},[s("div",{staticClass:"form-group"},[s("label",[t._v("Affecter un nouveau exportateur")]),t._v(" "),s("v-autocomplete",{attrs:{items:t.entreprises,clearable:"",dense:"",filled:""},model:{value:t.traking.entite_id,callback:function(e){t.$set(t.traking,"entite_id",e)},expression:"traking.entite_id"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.traking.commentaire,expression:"traking.commentaire"}],staticClass:"form-control form-control-lg form-control-solid",attrs:{id:"exampleTextarea",rows:"3",placeholder:"Commentaire"},domProps:{value:t.traking.commentaire},on:{input:function(e){e.target.composing||t.$set(t.traking,"commentaire",e.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),s("div",{staticClass:"separator separator-dashed my-10"})]):t._e(),t._v(" "),s("div",{staticClass:"timeline timeline-3"},[s("div",{staticClass:"timeline-items"},t._l(t.trakings,(function(e){return s("div",{key:e.id,staticClass:"timeline-item"},[s("div",{staticClass:"timeline-media",style:{"background-color":"rgb("+e.color+")","border-color":"rgb("+e.color+")"}},[s("i",{class:e.icon,style:{color:"#fff"}})]),t._v(" "),s("div",{staticClass:"timeline-content"},[s("div",{staticClass:"d-flex align-items-center justify-content-between mb-3"},[s("div",{staticClass:"mr-2"},[s("a",{staticClass:"text-dark-75 text-hover-primary font-weight-bold",attrs:{href:"#"}},[t._v(t._s(e.label))]),t._v(" "),s("span",{staticClass:"text-muted ml-2"},[t._v(t._s(e.date))]),t._v(" "),e.entite_id?s("span",{staticClass:"label font-weight-bolder label-inline ml-2",style:{color:"rgb("+e.color+")","background-color":"rgb("+e.color+",.2)"}},[t._v(t._s(e.entite_label))]):t._e()])]),t._v(" "),s("div",{staticClass:"d-flex align-items-center mb-3"},[s("div",{staticClass:"symbol symbol-30 mr-2"},[s("img",{attrs:{src:e.user_img,alt:""}})]),t._v(" "),s("div",[s("a",{staticClass:"text-dark font-size-xs font-weight-bolder",attrs:{href:"#"}},[t._v(t._s(e.user_nom))])])]),t._v(" "),e.commentaire?s("p",{staticClass:"p-0"},[t._v(t._s(e.commentaire))]):t._e()])])})),0)])])])])])])])])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-title"},[e("h3",{staticClass:"card-label"},[this._v("Exportateurs")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header h-auto py-4"},[e("div",{staticClass:"card-title"},[e("h3",{staticClass:"card-label"},[this._v("Affectation & Historique")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("button",{staticClass:"btn btn-light-primary font-weight-bold",attrs:{type:"submit"}},[this._v("Enregistrer")])])])}],!1,null,null,null);e.default=n.exports}}]);