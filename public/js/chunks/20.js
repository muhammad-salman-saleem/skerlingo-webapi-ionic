(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{201:function(t,e,a){"use strict";a.r(e);var r=a(32),i={components:{VJstree:a.n(r).a},data:function(){return{url:"slides",dataTree:[],search:"",headers:[{text:"Statut",align:"middle",value:"label"},{text:"Couleur",align:"middle",value:"color"},{text:"",align:"right",value:"actions",sortable:!1}],validationErrors:null,types:[],rubriques:[],langues:[],langue:"fr",rubrique:{id:null,categorie_id:null,text:null,text_fr:null,text_en:null,codif:null,color:null,icon:null,show_menu:null,show_calendar:null,first_rubrique:null,image_url:null,children:[]},edit:!1}},mounted:function(){new KTImageInput("kt_user_edit_avatar");console.log(KTLayoutStickyCard)},created:function(){this.fetch()},methods:{editStatut:function(t){this.edit=!0,$.each(this.rubrique,function(e,a){this.rubrique[e]=t[e]}.bind(this)),$("#kt_user_edit_avatar .image-input-wrapper").css("background-image","url("+this.rubrique.image_url+")")},itemClick:function(t){this.edit=!0,$.each(this.rubrique,function(e,a){this.rubrique[e]=t.model[e]}.bind(this))},saveOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.overlay=!0;var a={};a.dataTree=this.dataTree,axios.post("slides/save_order",a).then(function(t){this.fetch(),e||swal.fire(t.data.title,t.data.message,t.data.icon)}.bind(this)).catch((function(e){t.overlay=!1,console.log("check error: ",t.error)}))},fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={};this.$route.query.t&&(e.t=this.$route.query.t),axios.get(this.url,{params:e}).then(function(e){this.types=e.data.types,this.rubriques=e.data.rubriques,this.dataTree=e.data.dataTree,this.langues=e.data.langues,t&&this.saveOrder(!0)}.bind(this)).catch((function(t){return console.log(t)}))},deleteStatut:function(t){swal.fire({title:"Êtes-vous sûr ?",text:"Vous êtes sur le point de supprimer cette rubrique !",type:"question",showCancelButton:!0,confirmButtonText:"Supprimer",cancelButtonText:"Annuler"}).then(function(e){var a=this;e.value&&axios.post(this.url+"/"+t,{_method:"DELETE"}).then((function(t){swal.fire("Rubrique supprimé !","La Rubrique a été supprimée avec succés.","success"),a.fetch()})).catch((function(t){return console.log(t)}))}.bind(this))},saveStatut:function(){var t=this,e=new FormData;$.each(this.rubrique,(function(t,a){e.append(t,a||"")})),e.append("sous_rubrique","sous_rubrique"),axios.post(this.url,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t.clearForm(),swal.fire("Sous catégorie enregistrée !","La Sous catégorie a été enregistrée avec succés.","success"),t.fetch(!0)})).catch((function(e){422==e.response.status&&(t.validationErrors=e.response.data.errors)}))},addStatut:function(){this.clearForm(),this.validationErrors=null},clearForm:function(){this.edit=!1,$.each(this.rubrique,function(t,e){this.rubrique[t]=null}.bind(this)),$("#kt_user_edit_avatar .remove_photo").trigger("click"),$("#kt_user_edit_avatar input").val(""),$("#kt_user_edit_avatar .image-input-wrapper").css("background-image","url(https://via.placeholder.com/300/004c68/FFF?text=Upload)")},onImageChange:function(t){this.rubrique.icon=t.target.files[0]},changeLang:function(t){this.langue=t.value}}},s=a(4),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"subheader py-2 py-lg-4 subheader-solid",attrs:{id:"kt_subheader"}},[a("div",{staticClass:"container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap"},[a("div",{staticClass:"d-flex align-items-center flex-wrap mr-2"},[a("h5",{staticClass:"text-dark font-weight-bold mt-2 mb-2 mr-5"},[t._v("Slides")]),t._v(" "),a("div",{staticClass:"d-flex align-items-center",attrs:{id:"kt_subheader_search"}},[a("span",{staticClass:"text-dark-50 font-weight-bold",attrs:{id:"kt_subheader_total"}},[t._v(t._s(t.types.length)+" Sous catégories")])])])])]),t._v(" "),a("div",{staticClass:"d-flex flex-column-fluid"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"card card-custom gutter-b"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body p-0 pt-5"},[a("v-draggable-treeview",{scopedSlots:t._u([{key:"label",fn:function(e){var r=e.item;return[a("span",{on:{click:function(e){return t.editStatut(r)}}},[t._v(t._s(r.text))])]}},{key:"append",fn:function(e){var r=e.item;return[a("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(e){return t.editStatut(r)}}},[a("span",{staticClass:"svg-icon svg-icon-md svg-icon-success"},[a("i",{staticClass:"flaticon-edit"})])])]}}]),model:{value:t.dataTree,callback:function(e){t.dataTree=e},expression:"dataTree"}}),t._v(" "),a("div",{staticClass:"text-center p-3"},[a("a",{staticClass:"btn btn-light-primary mr-2",attrs:{href:"#"},on:{click:function(e){return t.saveOrder()}}},[a("i",{staticClass:"ki ki-check icon-sm"}),t._v("\n                  Enregistrer l'ordre actuel\n                ")])]),t._v(" "),t._e()],1)])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("form",{staticClass:"mb-3",on:{submit:function(e){return e.preventDefault(),t.saveStatut(e)}}},[a("div",{staticClass:"card card-custom card-sticky",attrs:{id:"kt_page_sticky_card_"}},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"card-title"},[t.rubrique.id?t._e():a("h3",{staticClass:"card-label"},[t._v("Gestion des slides")]),t._v(" "),t.rubrique.id?a("h3",{staticClass:"card-label"},[t._v("Gestion des slides")]):t._e()]),t._v(" "),a("div",{staticClass:"card-toolbar"},[t.rubrique.id?a("a",{staticClass:"btn btn-light-primary mr-2",attrs:{href:"#"},on:{click:function(e){return t.clearForm()}}},[a("i",{staticClass:"ki ki-long-arrow-back icon-sm"}),t._v("\n                    Retour\n                  ")]):t._e(),t._v(" "),t._m(1),t._v(" "),t.rubrique.id?a("a",{staticClass:"btn btn-light-danger ml-2",attrs:{href:"#"},on:{click:function(e){return t.deleteStatut(t.rubrique.id)}}},[a("i",{staticClass:"flaticon2-trash icon-sm"}),t._v("\n                    Supprimer\n                  ")]):t._e()])]),t._v(" "),a("div",{staticClass:"card-body"},[a("form",{staticClass:"form",attrs:{id:"kt_form"}},[t.validationErrors?a("validation-errors",{attrs:{errors:t.validationErrors}}):t._e(),t._v(" "),a("ul",{staticClass:"nav nav-tabs pl-0",attrs:{id:"myTab",role:"tablist"}},t._l(t.langues,(function(e){return a("li",{key:e.value,staticClass:"nav-item",on:{click:function(a){return t.changeLang(e)}}},[a("a",{staticClass:"nav-link",class:{active:t.langue==e.value},attrs:{id:"home-tab","data-toggle":"tab",href:"#"}},[t._m(2,!0),t._v(" "),a("span",{staticClass:"nav-text"},[t._v(t._s(e.text))])])])})),0),t._v(" "),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-xl-12"},[a("div",{},[a("h4",{staticClass:"text-dark font-weight-bold mb-4 mt-4"},[t._v("Informations :")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"row"},[t._l(t.langues,(function(e){return a("div",{key:e.value,staticClass:"col-md-12 pt-0",class:{"d-none":t.langue!=e.value}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("\n                                    Titre\n                                    "),a("small",[a("b",[t._v("["+t._s(e.value)+"]")])])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rubrique["text_"+e.value],expression:"rubrique['text_'+l.value]"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Titre "+e.value},domProps:{value:t.rubrique["text_"+e.value]},on:{input:function(a){a.target.composing||t.$set(t.rubrique,"text_"+e.value,a.target.value)}}})])])})),t._v(" "),a("div",{staticClass:"col-md-6 pb-0 d-none"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Codif Menu")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rubrique.codif,expression:"rubrique.codif"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Titre"},domProps:{value:t.rubrique.codif},on:{input:function(e){e.target.composing||t.$set(t.rubrique,"codif",e.target.value)}}})])])],2),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("Catégorie")]),t._v(" "),a("v-autocomplete",{attrs:{items:t.rubriques,clearable:"",dense:"",solo:""},model:{value:t.rubrique.categorie_id,callback:function(e){t.$set(t.rubrique,"categorie_id",e)},expression:"rubrique.categorie_id"}})],1),t._v(" "),a("div",{staticClass:"row d-none"},[a("div",{staticClass:"col-md-12 pt-0"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[t._v("Code couleur")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rubrique.color,expression:"rubrique.color"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Code couleur"},domProps:{value:t.rubrique.color},on:{input:function(e){e.target.composing||t.$set(t.rubrique,"color",e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group mt-2 text-center"},[a("label",{staticClass:"d-block text-center"},[t._v("Image")]),t._v(" "),a("div",{staticClass:"image-input image-input-empty image-input-outline",style:{"background-image":"url("+t.rubrique.image_url+")"},attrs:{id:"kt_user_edit_avatar"}},[a("div",{staticClass:"image-input-wrapper"}),t._v(" "),a("label",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"change","data-toggle":"tooltip",title:"","data-original-title":"Change avatar"}},[a("i",{staticClass:"fa fa-pen icon-sm text-muted"}),t._v(" "),a("input",{attrs:{type:"file",name:"image",accept:".png, .jpg, .jpeg, .svg"},on:{change:t.onImageChange}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"profile_avatar_remove"}})]),t._v(" "),t._m(3),t._v(" "),t._m(4)]),t._v(" "),t._m(5)])])])]),t._v(" "),a("div",{staticClass:"separator separator-dashed my-5 mt-1"}),t._v(" "),a("h4",{staticClass:"text-dark font-weight-bold mb-5 d-none"},[t._v("Paramètres :")]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"checkbox-list d-none"},[a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rubrique.show_menu,expression:"rubrique.show_menu"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(t.rubrique.show_menu)?t._i(t.rubrique.show_menu,null)>-1:t.rubrique.show_menu},on:{change:function(e){var a=t.rubrique.show_menu,r=e.target,i=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.rubrique,"show_menu",a.concat([null])):s>-1&&t.$set(t.rubrique,"show_menu",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.rubrique,"show_menu",i)}}}),t._v(" "),a("span"),t._v("Afficher le secteur sur le slider du page d'accueil\n                          ")]),t._v(" "),a("label",{staticClass:"checkbox d-none"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rubrique.first_rubrique,expression:"rubrique.first_rubrique"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(t.rubrique.first_rubrique)?t._i(t.rubrique.first_rubrique,null)>-1:t.rubrique.first_rubrique},on:{change:function(e){var a=t.rubrique.first_rubrique,r=e.target,i=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.rubrique,"first_rubrique",a.concat([null])):s>-1&&t.$set(t.rubrique,"first_rubrique",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.rubrique,"first_rubrique",i)}}}),t._v(" "),a("span"),t._v("Affecter cette rubrique automatiquement lors de l'injection des fiches\n                          ")]),t._v(" "),a("label",{staticClass:"checkbox d-none"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rubrique.show_calendar,expression:"rubrique.show_calendar"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(t.rubrique.show_calendar)?t._i(t.rubrique.show_calendar,null)>-1:t.rubrique.show_calendar},on:{change:function(e){var a=t.rubrique.show_calendar,r=e.target,i=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.rubrique,"show_calendar",a.concat([null])):s>-1&&t.$set(t.rubrique,"show_calendar",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.rubrique,"show_calendar",i)}}}),t._v(" "),a("span"),t._v("Demander un créneau si je choisi(e) cette rubrique (Rappel, RDV...)\n                          ")])])])]),t._v(" "),a("div",{staticClass:"col-xl-2"})])],1)])])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("div",{staticClass:"card-title"},[e("h3",{staticClass:"card-label"},[this._v("Slides")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e("i",{staticClass:"ki ki-check icon-sm"}),this._v("\n                      Enregistrer\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"nav-icon"},[e("i",{staticClass:"far fa-flag"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"cancel","data-toggle":"tooltip",title:"Cancel avatar"}},[e("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"remove","data-toggle":"tooltip",title:"Remove avatar"}},[e("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"d-block text-center"},[e("small",[this._v("1920px/1280px")])])}],!1,null,null,null);e.default=n.exports}}]);