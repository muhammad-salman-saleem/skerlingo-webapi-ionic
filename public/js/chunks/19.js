(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{197:function(e,t,i){"use strict";i.r(t);var a=i(32),s=i.n(a),r=i(2),n=i(26),l=i.n(n);function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var u={components:{VJstree:s.a,TiptapVuetify:r.o,draggable:l.a},data:function(){return{url:"rubriques",dataTree:[],times:[],impacts_prix:[],impacts_delai:[],search:"",headers:[{text:"",sortable:!1},{text:"Question",align:"middle",value:"label"},{text:"Type",align:"middle",value:"type_label"},{text:"Obligatoire",align:"middle",value:"required"},{text:"",align:"right",value:"actions",sortable:!1}],headers_services_optionnel:[{text:"",sortable:!1},{text:"Service",align:"middle",value:"label"},{text:"",align:"right",value:"actions",sortable:!1}],validationErrors:null,types:[],listes:[],rubriques:[],langues:[],langue:"fr",services_optionnel:[],rubrique:{id:null,parent_id:null,text:null,text_fr:null,text_it:null,text_ar:null,codif:null,color:null,icon:null,image:null,montant:null,presentation:null,presentation_fr:null,presentation_it:null,presentation_ar:null,description:null,description_fr:null,description_it:null,description_ar:null,time_to_deliver:null,enable:null,show_menu:null,show_calendar:null,first_rubrique:null,icon_url:null,image_url:null,children:[],questions:[],services_optionnel:[]},question:{id:null,rubrique_id:null,label:null,type:null,liste:null,description:null,required:null,reponses:[]},service_optionnel:{id:null,rubrique_id:null,service_id:null,impact_prix:null,impact_montant_type:null,impact_montant_valeur:null,impact_delai:null,impact_delai_type:null,impact_delai_valeur:null},extensions:[r.g,r.j,r.q,r.n,r.i,r.k,r.c,r.b],edit:!1}},mounted:function(){new KTImageInput("kt_user_edit_avatar_icon"),new KTImageInput("kt_user_edit_avatar_image")},created:function(){this.fetch()},methods:{editStatut:function(e){$("#kt_user_edit_avatar_icon .image-input-wrapper").css("background-image","none"),this.edit=!0,$.each(this.rubrique,function(t,i){this.rubrique[t]=e[t]}.bind(this)),this.get_questions()},itemClick:function(e){this.edit=!0,$.each(this.rubrique,function(t,i){this.rubrique[t]=e.model[t]}.bind(this))},saveOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.overlay=!0;var i={};i.dataTree=this.dataTree,axios.post("rubriques/save_order",i).then(function(e){this.fetch(),t||swal.fire(e.data.title,e.data.message,e.data.icon)}.bind(this)).catch((function(t){e.overlay=!1,console.log("check error: ",e.error)}))},fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};this.$route.query.t&&(t.t=this.$route.query.t),axios.get(this.url,{params:t}).then(function(t){this.types=t.data.types,this.listes=t.data.listes,this.rubriques=t.data.rubriques,this.dataTree=t.data.dataTree,this.times=t.data.times,this.impacts_prix=t.data.impacts_prix,this.impacts_delai=t.data.impacts_delai,this.langues=t.data.langues,e&&this.saveOrder(!0)}.bind(this)).catch((function(e){return console.log(e)}))},get_questions:function(){var e={};e.rubrique_id=this.rubrique.id,axios.get("questions",{params:e}).then(function(e){this.rubrique.questions=e.data.questions,this.rubrique.services_optionnel=e.data.services_optionnel}.bind(this)).catch((function(e){return console.log(e)}))},deleteStatut:function(e){swal.fire({title:"Êtes-vous sûr ?",text:"Vous êtes sur le point de supprimer cette rubrique !",type:"question",showCancelButton:!0,confirmButtonText:"Supprimer",cancelButtonText:"Annuler"}).then(function(t){var i=this;t.value&&axios.post(this.url+"/"+e,{_method:"DELETE"}).then((function(e){swal.fire("Service supprimé !","Le service a été supprimé avec succés.","success"),i.fetch()})).catch((function(e){return console.log(e)}))}.bind(this))},deleteQuestion:function(e){swal.fire({title:"Êtes-vous sûr ?",text:"Vous êtes sur le point de supprimer cette question !",type:"question",showCancelButton:!0,confirmButtonText:"Supprimer",cancelButtonText:"Annuler"}).then(function(t){var i=this;t.value&&axios.post("questions/"+e,{_method:"DELETE"}).then((function(t){swal.fire("Question supprimée !","La question a été supprimée avec succés.","success");var a=i.rubrique.questions.find((function(t){return t.id===e})),s=i.rubrique.questions.indexOf(a);i.rubrique.questions.splice(s,1),i.rubrique.questions=o(i.rubrique.questions)})).catch((function(e){return console.log(e)}))}.bind(this))},deleteServiceOptionnel:function(e){swal.fire({title:"Êtes-vous sûr ?",text:"Vous êtes sur le point de désaffecter ce service !",type:"question",showCancelButton:!0,confirmButtonText:"Supprimer",cancelButtonText:"Annuler"}).then(function(t){var i=this;t.value&&axios.post("rubriques/delete_service_optionnel/"+e,{_method:"DELETE"}).then((function(t){swal.fire("Service optionnel désaffecté !","Le service a été désaffecté avec succés.","success");var a=i.rubrique.services_optionnel.find((function(t){return t.id===e})),s=i.rubrique.services_optionnel.indexOf(a);i.rubrique.services_optionnel.splice(s,1),i.rubrique.services_optionnel=o(i.rubrique.services_optionnel)})).catch((function(e){return console.log(e)}))}.bind(this))},saveStatut:function(e){var t=this;e.target.disabled=!0,e.target.classList.toggle("spinner");var i=new FormData;$.each(this.rubrique,(function(e,t){i.append(e,t||"")})),i.append("questions",JSON.stringify(this.rubrique.questions)),i.append("services_optionnel",JSON.stringify(this.rubrique.services_optionnel)),axios.post(this.url,i,{headers:{"content-type":"multipart/form-data"}}).then((function(i){e.target.disabled=!1,e.target.classList.toggle("spinner"),t.clearForm(),swal.fire("Rubrique enregistrée !","La rubrique a été enregistrée avec succés.","success"),t.langue="fr",t.fetch(!0)})).catch((function(i){e.target.disabled=!1,e.target.classList.toggle("spinner"),422==i.response.status&&(t.validationErrors=i.response.data.errors)}))},addStatut:function(){this.clearForm(),this.validationErrors=null},addQuestion:function(){this.clearFormQuestion(),this.validationErrors=null},editQuestion:function(e){console.log(this.rubrique.questions),$("#modal_form_question").modal("toggle"),this.validationErrors=null,this.edit=!0,$.each(this.question,function(t,i){this.question[t]=e[t]}.bind(this))},saveQuestion:function(e){var t=this;e.target.disabled=!0,e.target.classList.toggle("spinner");var i=new FormData;$.each(this.question,(function(e,t){i.append(e,t||"")})),this.rubrique&&i.append("rubrique_id",this.rubrique.id),i.append("reponses",JSON.stringify(this.question.reponses)),axios.post("questions",i,{headers:{"content-type":"multipart/form-data"}}).then((function(i){if(e.target.disabled=!1,e.target.classList.toggle("spinner"),i.data.question)if(t.rubrique.questions.filter((function(e){return e.id==i.data.question.id}))[0]){var a=t.rubrique.questions.find((function(e){return e.id===i.data.question.id})),s=t.rubrique.questions.indexOf(a);t.rubrique.questions.splice(s,1,i.data.question),t.rubrique.questions=o(t.rubrique.questions)}else t.rubrique.questions.push(i.data.question);t.clearFormQuestion(),$("#modal_form_question").modal("toggle")})).catch((function(i){e.target.disabled=!1,e.target.classList.toggle("spinner"),422==i.response.status&&(t.validationErrors=i.response.data.errors)}))},addServiceOptionnel:function(){this.clearFormServiceOptionnel(),this.validationErrors=null},editServiceOptionnel:function(e){$("#modal_form_service_optionnel").modal("toggle"),this.validationErrors=null,this.edit=!0,$.each(this.service_optionnel,function(t,i){this.service_optionnel[t]=e[t]}.bind(this))},changeServiceOptionnel:function(){var e=this,t=this.services_optionnel.filter((function(t){return t.id==e.service_optionnel.service_id}))[0];this.service_optionnel.impact_montant_valeur=t.prix,this.service_optionnel.impact_delai_valeur=t.delai},saveServiceOptionnel:function(e){var t=this;e.target.disabled=!0,e.target.classList.toggle("spinner");var i=new FormData;$.each(this.service_optionnel,(function(e,t){i.append(e,t||"")})),this.rubrique&&i.append("rubrique_id",this.rubrique.id),axios.post("rubriques/service_optionnel",i,{headers:{"content-type":"multipart/form-data"}}).then((function(i){if(e.target.disabled=!1,e.target.classList.toggle("spinner"),i.data.service_optionnel)if(t.rubrique.services_optionnel.filter((function(e){return e.id==i.data.service_optionnel.id}))[0]){var a=t.rubrique.services_optionnel.find((function(e){return e.id===i.data.service_optionnel.id})),s=t.rubrique.services_optionnel.indexOf(a);t.rubrique.services_optionnel.splice(s,1,i.data.service_optionnel),t.rubrique.services_optionnel=o(t.rubrique.services_optionnel)}else t.rubrique.services_optionnel.push(i.data.service_optionnel);t.clearFormServiceOptionnel(),$("#modal_form_service_optionnel").modal("toggle")})).catch((function(i){e.target.disabled=!1,e.target.classList.toggle("spinner"),422==i.response.status&&(t.validationErrors=i.response.data.errors)}))},clearFormServiceOptionnel:function(){this.edit=!1,$.each(this.service_optionnel,function(e,t){this.service_optionnel[e]=null}.bind(this))},removeKeywords:function(e){this.question.reponses.splice(this.question.reponses.indexOf(e),1),this.question.reponses=o(this.question.reponses)},clearForm:function(){this.edit=!1,$.each(this.rubrique,function(e,t){this.rubrique[e]=null}.bind(this)),this.rubrique.questions=[],this.rubrique.services_optionnel=[],$("#kt_user_edit_avatar_icon .remove_photo").trigger("click"),$("#kt_user_edit_avatar_icon input").val(""),$("#kt_user_edit_avatar_icon .image-input-wrapper").css("background-image","url(https://via.placeholder.com/300/004c68/FFF?text=Upload)")},clearFormQuestion:function(){this.edit=!1,$.each(this.question,function(e,t){this.question[e]=null}.bind(this))},onImageChange:function(e){this.rubrique.image_url="",this.rubrique.icon_url="",this.rubrique.icon=e.target.files[0]},onImageChangeModele:function(e){this.rubrique.image=e.target.files[0]},changeLang:function(e){this.langue=e.value}}},d=i(4),v=Object(d.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"subheader py-2 py-lg-4 subheader-solid",attrs:{id:"kt_subheader"}},[i("div",{staticClass:"container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap"},[i("div",{staticClass:"d-flex align-items-center flex-wrap mr-2"},[i("h5",{staticClass:"text-dark font-weight-bold mt-2 mb-2 mr-5"},[e._v("Arborescence des rubriques")]),e._v(" "),i("div",{staticClass:"d-flex align-items-center",attrs:{id:"kt_subheader_search"}},[i("span",{staticClass:"text-dark-50 font-weight-bold",attrs:{id:"kt_subheader_total"}},[e._v(e._s(e.rubriques.length)+" rubriques")])])])])]),e._v(" "),i("div",{staticClass:"d-flex flex-column-fluid"},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-5"},[i("div",{staticClass:"card card-custom gutter-b"},[e._m(0),e._v(" "),i("div",{staticClass:"card-body p-0 pt-5"},[i("v-draggable-treeview",{scopedSlots:e._u([{key:"label",fn:function(t){var a=t.item;return[i("div",{staticClass:"d-flex"},[a.parent_id?i("span",[i("span",{staticClass:"label label-sm mr-2",class:{"label-danger":!a.enable,"label-success":a.enable}})]):e._e(),e._v(" "),i("span",[e._v(e._s(a.label))])])]}},{key:"append",fn:function(t){var a=t.item;return[i("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(t){return e.editStatut(a)}}},[i("span",{staticClass:"svg-icon svg-icon-md svg-icon-success"},[i("i",{staticClass:"flaticon-edit"})])])]}}]),model:{value:e.dataTree,callback:function(t){e.dataTree=t},expression:"dataTree"}}),e._v(" "),i("div",{staticClass:"text-center p-3"},[i("a",{staticClass:"btn btn-light-primary mr-2",attrs:{href:"#"},on:{click:function(t){return e.saveOrder()}}},[i("i",{staticClass:"ki ki-check icon-sm"}),e._v("\n                  Enregistrer l'ordre actuel\n                ")])]),e._v(" "),e._e()],1)])]),e._v(" "),i("div",{staticClass:"col-md-7"},[i("form",{staticClass:"mb-3"},[i("div",{staticClass:"card card-custom card-sticky",attrs:{id:"kt_page_sticky_card_"}},[i("div",{staticClass:"card-header"},[i("div",{staticClass:"card-title"},[e.rubrique.id?e._e():i("h3",{staticClass:"card-label"},[e._v("Ajouter une rubrique")]),e._v(" "),e.rubrique.id?i("h3",{staticClass:"card-label"},[e._v("Modifier une rubrique")]):e._e()]),e._v(" "),i("div",{staticClass:"card-toolbar"},[e.rubrique.id?i("a",{staticClass:"btn btn-light-primary mr-2",attrs:{href:"#"},on:{click:function(t){return e.clearForm()}}},[i("i",{staticClass:"ki ki-long-arrow-back icon-sm"}),e._v("\n                    Retour\n                  ")]):e._e(),e._v(" "),i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-primary spinner-light-success spinner-right",attrs:{type:"button"},on:{click:function(t){return e.saveStatut(t)}}},[i("i",{staticClass:"ki ki-check icon-sm"}),e._v("\n                      Enregistrer\n                    ")]),e._v(" "),i("button",{staticClass:"btn btn-primary dropdown-toggle dropdown-toggle-split",attrs:{type:"button",disabled:!e.rubrique.text,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),e._v(" "),i("div",{staticClass:"dropdown-menu dropdown-menu-sm dropdown-menu-right"},[i("ul",{staticClass:"nav nav-hover flex-column pl-0"},[e.rubrique.id&&0==e.rubrique.children.length?i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(t){return e.deleteStatut(e.rubrique.id)}}},[i("i",{staticClass:"nav-icon flaticon-delete"}),e._v(" "),i("span",{staticClass:"nav-text"},[e._v("Supprimer")])])]):e._e()])])])])]),e._v(" "),i("div",{staticClass:"card-body"},[i("form",{staticClass:"form",attrs:{id:"kt_form"}},[e._m(1),e._v(" "),i("div",{staticClass:"tab-content mt-5",attrs:{id:"myTabContent"}},[i("div",{staticClass:"tab-pane fade show active",attrs:{id:"kt_tab_pane_1",role:"tabpanel","aria-labelledby":"kt_tab_pane_1"}},[e.validationErrors?i("validation-errors",{attrs:{errors:e.validationErrors}}):e._e(),e._v(" "),i("ul",{staticClass:"nav nav-tabs pl-0",attrs:{id:"myTab",role:"tablist"}},e._l(e.langues,(function(t){return i("li",{key:t.value,staticClass:"nav-item",on:{click:function(i){return e.changeLang(t)}}},[i("a",{staticClass:"nav-link",class:{active:e.langue==t.value},attrs:{id:"home-tab","data-toggle":"tab",href:"#"}},[e._m(2,!0),e._v(" "),i("span",{staticClass:"nav-text"},[e._v(e._s(t.text))])])])})),0),e._v(" "),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-xl-12"},[i("div",{},[i("h4",{staticClass:"text-dark font-weight-bold mb-4 mt-4"},[e._v("Informations :")]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Catégorie")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.rubriques,clearable:"",dense:"",solo:""},model:{value:e.rubrique.parent_id,callback:function(t){e.$set(e.rubrique,"parent_id",t)},expression:"rubrique.parent_id"}})],1),e._v(" "),i("div",{staticClass:"row"},[e._l(e.langues,(function(t){return i("div",{key:t.value,staticClass:"col-md-12 pt-0",class:{"d-none":e.langue!=t.value}},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("\n                                        Titre\n                                        "),i("small",[i("b",[e._v("["+e._s(t.value)+"]")])])]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique["text_"+t.value],expression:"rubrique['text_'+l.value]"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Titre "+t.value},domProps:{value:e.rubrique["text_"+t.value]},on:{input:function(i){i.target.composing||e.$set(e.rubrique,"text_"+t.value,i.target.value)}}})])])})),e._v(" "),i("div",{staticClass:"col-md-6 pb-0 d-none"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Codif Menu")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.codif,expression:"rubrique.codif"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Titre"},domProps:{value:e.rubrique.codif},on:{input:function(t){t.target.composing||e.$set(e.rubrique,"codif",t.target.value)}}})])])],2),e._v(" "),e._l(e.langues,(function(t){return i("div",{key:t.value,class:{"d-none":e.langue!=t.value}},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("\n                                      Brève description\n                                      "),i("small",[i("b",[e._v("["+e._s(t.value)+"]")])]),e._v(" :\n                                    ")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.rubrique["presentation_"+t.value],expression:"rubrique['presentation_'+l.value]"}],staticClass:"form-control",attrs:{placeholder:"Titre "+t.value,rows:"2"},domProps:{value:e.rubrique["presentation_"+t.value]},on:{input:function(i){i.target.composing||e.$set(e.rubrique,"presentation_"+t.value,i.target.value)}}})])])})),e._v(" "),i("div",{staticClass:"row d-none"},[i("div",{staticClass:"col-md-6 pt-0"},[i("div",{staticClass:"form-group mb-0"},[i("label",[e._v("Delivery time")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.times,clearable:"",dense:"",solo:""},model:{value:e.rubrique.time_to_deliver,callback:function(t){e.$set(e.rubrique,"time_to_deliver",t)},expression:"rubrique.time_to_deliver"}})],1)]),e._v(" "),i("div",{staticClass:"col-md-6 pt-0"},[i("div",{staticClass:"form-group mb-0"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Price :")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.montant,expression:"rubrique.montant"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Price"},domProps:{value:e.rubrique.montant},on:{input:function(t){t.target.composing||e.$set(e.rubrique,"montant",t.target.value)}}})])])]),e._v(" "),i("div",{staticClass:"row d-none"},[i("div",{staticClass:"col-md-12 pt-0"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Code couleur")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.color,expression:"rubrique.color"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Code couleur"},domProps:{value:e.rubrique.color},on:{input:function(t){t.target.composing||e.$set(e.rubrique,"color",t.target.value)}}})])])])],2),e._v(" "),i("div",{staticClass:"col-md-4"},[i("div",{staticClass:"form-group mt-2 text-center"},[i("label",{staticClass:"d-block text-center"},[e._v("Photo")]),e._v(" "),i("div",{staticClass:"image-input image-input-empty image-input-outline",style:{"background-image":"url("+e.rubrique.icon_url+")"},attrs:{id:"kt_user_edit_avatar_icon"}},[i("div",{staticClass:"image-input-wrapper"}),e._v(" "),i("label",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"change","data-toggle":"tooltip",title:"","data-original-title":"Change avatar"}},[i("i",{staticClass:"fa fa-pen icon-sm text-muted"}),e._v(" "),i("input",{attrs:{type:"file",name:"image",accept:".png, .jpg, .jpeg, .svg"},on:{change:e.onImageChange}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"profile_avatar_remove"}})]),e._v(" "),e._m(3),e._v(" "),e._m(4)])]),e._v(" "),i("div",{staticClass:"form-group mt-2 text-center d-none"},[i("label",{staticClass:"d-block text-center"},[e._v("Modèle document")]),e._v(" "),i("div",{staticClass:"image-input image-input-empty image-input-outline",style:{"background-image":"url("+e.rubrique.image_url+")"},attrs:{id:"kt_user_edit_avatar_image"}},[i("div",{staticClass:"image-input-wrapper"}),e._v(" "),i("label",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"change","data-toggle":"tooltip",title:"","data-original-title":"Change avatar"}},[i("i",{staticClass:"fa fa-pen icon-sm text-muted"}),e._v(" "),i("input",{attrs:{type:"file",name:"image",accept:".png, .jpg, .jpeg, .svg"},on:{change:e.onImageChangeModele}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"profile_avatar_remove"}})]),e._v(" "),e._m(5),e._v(" "),e._m(6)])])])]),e._v(" "),e._l(e.langues,(function(t){return i("div",{key:t.value,staticClass:"form-group",class:{"d-none":e.langue!=t.value}},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("\n                                Description\n                                "),i("small",[i("b",[e._v("["+e._s(t.value)+"]")])]),e._v(" :\n                              ")]),e._v(" "),i("tiptap-vuetify",{attrs:{extensions:e.extensions},model:{value:e.rubrique["description_"+t.value],callback:function(i){e.$set(e.rubrique,"description_"+t.value,i)},expression:"rubrique['description_'+l.value]"}})],1)}))],2),e._v(" "),i("div",{staticClass:"separator separator-dashed my-5 mt-1"}),e._v(" "),i("h4",{staticClass:"text-dark font-weight-bold mb-5"},[e._v("Paramètres :")]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"checkbox-list"},[i("label",{staticClass:"checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.enable,expression:"rubrique.enable"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.rubrique.enable)?e._i(e.rubrique.enable,null)>-1:e.rubrique.enable},on:{change:function(t){var i=e.rubrique.enable,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.rubrique,"enable",i.concat([null])):r>-1&&e.$set(e.rubrique,"enable",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.rubrique,"enable",s)}}}),e._v(" "),i("span"),e._v("Activer la rubrique\n                              ")]),e._v(" "),i("label",{staticClass:"checkbox d-none"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.show_menu,expression:"rubrique.show_menu"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.rubrique.show_menu)?e._i(e.rubrique.show_menu,null)>-1:e.rubrique.show_menu},on:{change:function(t){var i=e.rubrique.show_menu,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.rubrique,"show_menu",i.concat([null])):r>-1&&e.$set(e.rubrique,"show_menu",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.rubrique,"show_menu",s)}}}),e._v(" "),i("span"),e._v("Afficher le service sur le slider du page d'accueil\n                              ")]),e._v(" "),i("label",{staticClass:"checkbox d-none"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.first_rubrique,expression:"rubrique.first_rubrique"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.rubrique.first_rubrique)?e._i(e.rubrique.first_rubrique,null)>-1:e.rubrique.first_rubrique},on:{change:function(t){var i=e.rubrique.first_rubrique,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.rubrique,"first_rubrique",i.concat([null])):r>-1&&e.$set(e.rubrique,"first_rubrique",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.rubrique,"first_rubrique",s)}}}),e._v(" "),i("span"),e._v("Affecter cette rubrique automatiquement lors de l'injection des fiches\n                              ")]),e._v(" "),i("label",{staticClass:"checkbox d-none"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.rubrique.show_calendar,expression:"rubrique.show_calendar"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.rubrique.show_calendar)?e._i(e.rubrique.show_calendar,null)>-1:e.rubrique.show_calendar},on:{change:function(t){var i=e.rubrique.show_calendar,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.rubrique,"show_calendar",i.concat([null])):r>-1&&e.$set(e.rubrique,"show_calendar",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.rubrique,"show_calendar",s)}}}),e._v(" "),i("span"),e._v("Demander un créneau si je choisi(e) cette rubrique (Rappel, RDV...)\n                              ")])])])]),e._v(" "),i("div",{staticClass:"col-xl-2"})])],1),e._v(" "),i("div",{staticClass:"tab-pane fade",attrs:{id:"kt_tab_pane_2",role:"tabpanel","aria-labelledby":"kt_tab_pane_2"}},[i("div",{staticClass:"d-flex align-items-center justify-content-end"},[i("a",{staticClass:"btn btn-primary btn-sm",attrs:{"data-toggle":"modal",href:"#modal_form_question"},on:{click:function(t){return e.addQuestion()}}},[i("i",{staticClass:"ki ki-plus icon-1x"}),e._v("Ajouter une question\n                        ")])]),e._v(" "),i("v-card",{staticStyle:{"box-shadow":"none"}},[i("v-data-table",{staticClass:"table",attrs:{headers:e.headers,items:e.rubrique.questions,"item-key":"id","show-select":!1,"disable-pagination":!0,"hide-default-footer":!0},scopedSlots:e._u([{key:"body",fn:function(t){return[i("draggable",{attrs:{list:e.rubrique.questions,tag:"tbody"}},e._l(e.rubrique.questions,(function(t,a){return i("tr",{key:a},[i("td",[i("v-icon",{staticClass:"page__grab-icon",attrs:{small:""}},[e._v("mdi-arrow-all")])],1),e._v(" "),i("td",[i("span",{staticClass:"font-weight-bold font-size-sm"},[e._v(e._s(t.label))])]),e._v(" "),i("td",[i("span",{staticClass:"label label-lg label-dark-light label-inline"},[e._v(e._s(t.type_label))])]),e._v(" "),i("td",[t.required?i("span",{staticClass:"label label-lg label-light-danger label-inline"},[e._v("Oui")]):e._e(),e._v(" "),t.required?e._e():i("span",{staticClass:"label label-lg label-light-success label-inline"},[e._v("Non")])]),e._v(" "),i("td",[i("a",{staticClass:"btn btn-icon btn-light btn-hover-primary btn-sm mx-3",attrs:{href:"javascript:void(0)"},on:{click:function(i){return e.editQuestion(t)}}},[i("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[i("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),e._v(" "),i("path",{attrs:{d:"M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z",fill:"#000000","fill-rule":"nonzero",transform:"translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953)"}}),e._v(" "),i("path",{attrs:{d:"M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z",fill:"#000000","fill-rule":"nonzero",opacity:"0.3"}})])])])]),e._v(" "),i("a",{staticClass:"btn btn-icon btn-light btn-hover-primary btn-sm",attrs:{href:"#"},on:{click:function(i){return e.deleteQuestion(t.id)}}},[i("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"}},[i("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("rect",{attrs:{x:"0",y:"0",width:"24",height:"24"}}),e._v(" "),i("path",{attrs:{d:"M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z",fill:"#000000","fill-rule":"nonzero"}}),e._v(" "),i("path",{attrs:{d:"M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z",fill:"#000000",opacity:"0.3"}})])])])])])])})),0)]}}])})],1)],1)])])])])])])])])]),e._v(" "),i("div",{staticClass:"modal fade",attrs:{id:"modal_form_question",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[e.question.id?e._e():i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Ajouter une question")]),e._v(" "),e.question.id?i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Modifier une question")]):e._e(),e._v(" "),e._m(7)]),e._v(" "),i("form",{staticClass:"mb-3"},[i("div",{staticClass:"modal-body"},[e.validationErrors?i("validation-errors",{attrs:{errors:e.validationErrors}}):e._e(),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Titre :")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.question.label,expression:"question.label"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Titre"},domProps:{value:e.question.label},on:{input:function(t){t.target.composing||e.$set(e.question,"label",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6 pt-0"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Type de question")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.types,clearable:"",dense:"",solo:""},model:{value:e.question.type,callback:function(t){e.$set(e.question,"type",t)},expression:"question.type"}})],1)]),e._v(" "),"liste"==e.question.type?i("div",{staticClass:"col-md-6 pt-0"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Type des réponses")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.listes,clearable:"",dense:"",solo:""},model:{value:e.question.liste,callback:function(t){e.$set(e.question,"liste",t)},expression:"question.liste"}})],1)]):e._e()]),e._v(" "),"keywords"==e.question.liste?i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Réponses personalisées :")]),e._v(" "),i("v-combobox",{attrs:{"small-chips":"",clearable:"",label:"Réponses personalisées",multiple:"",solo:""},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.attrs,s=t.item,r=t.select,n=t.selected;return[i("v-chip",e._b({attrs:{small:"","input-value":n,close:""},on:{click:r,"click:close":function(t){return e.removeKeywords(s)}}},"v-chip",a,!1),[e._v(e._s(s)+" ")])]}}],null,!1,4100731516),model:{value:e.question.reponses,callback:function(t){e.$set(e.question,"reponses",t)},expression:"question.reponses"}})],1):e._e(),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"checkbox-list"},[i("label",{staticClass:"checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.question.required,expression:"question.required"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.question.required)?e._i(e.question.required,null)>-1:e.question.required},on:{change:function(t){var i=e.question.required,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.question,"required",i.concat([null])):r>-1&&e.$set(e.question,"required",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.question,"required",s)}}}),e._v(" "),i("span"),e._v(" Question obligatoire\n                ")])])])],1),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.clearFormQuestion()}}},[e._v("Fermer")]),e._v(" "),i("button",{staticClass:"btn btn-primary spinner-light-success spinner-right",attrs:{type:"submit"},on:{click:function(t){return e.saveQuestion(t)}}},[e._v("Enregistrer")])])])])])]),e._v(" "),i("div",{staticClass:"modal fade",attrs:{id:"modal_form_service_optionnel",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[e.service_optionnel.id?e._e():i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Affecter une rubrique optionnel")]),e._v(" "),e.service_optionnel.id?i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Modifier le service optionnel")]):e._e(),e._v(" "),e._m(8)]),e._v(" "),i("form",{staticClass:"mb-3"},[i("div",{staticClass:"modal-body"},[e.validationErrors?i("validation-errors",{attrs:{errors:e.validationErrors}}):e._e(),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12 pt-0"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Service optionnel")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.services_optionnel,clearable:"",dense:"",solo:""},on:{change:function(t){return e.changeServiceOptionnel()}},model:{value:e.service_optionnel.service_id,callback:function(t){e.$set(e.service_optionnel,"service_id",t)},expression:"service_optionnel.service_id"}})],1)])]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"checkbox-list"},[i("label",{staticClass:"checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.service_optionnel.impact_prix,expression:"service_optionnel.impact_prix"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.service_optionnel.impact_prix)?e._i(e.service_optionnel.impact_prix,null)>-1:e.service_optionnel.impact_prix},on:{change:function(t){var i=e.service_optionnel.impact_prix,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.service_optionnel,"impact_prix",i.concat([null])):r>-1&&e.$set(e.service_optionnel,"impact_prix",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.service_optionnel,"impact_prix",s)}}}),e._v(" "),i("span"),e._v(" Impact sur le prix\n                ")])])]),e._v(" "),e.service_optionnel.impact_prix?i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6 pt-0"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Type")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.impacts_prix,clearable:"",dense:"",solo:""},model:{value:e.service_optionnel.impact_montant_type,callback:function(t){e.$set(e.service_optionnel,"impact_montant_type",t)},expression:"service_optionnel.impact_montant_type"}})],1)]),e._v(" "),i("div",{staticClass:"col-md-6 pt-0"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Valeur :")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.service_optionnel.impact_montant_valeur,expression:"service_optionnel.impact_montant_valeur"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Valeur"},domProps:{value:e.service_optionnel.impact_montant_valeur},on:{input:function(t){t.target.composing||e.$set(e.service_optionnel,"impact_montant_valeur",t.target.value)}}})])]):e._e(),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"checkbox-list"},[i("label",{staticClass:"checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.service_optionnel.impact_delai,expression:"service_optionnel.impact_delai"}],attrs:{type:"checkbox",name:"Checkboxes1"},domProps:{checked:Array.isArray(e.service_optionnel.impact_delai)?e._i(e.service_optionnel.impact_delai,null)>-1:e.service_optionnel.impact_delai},on:{change:function(t){var i=e.service_optionnel.impact_delai,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=e._i(i,null);a.checked?r<0&&e.$set(e.service_optionnel,"impact_delai",i.concat([null])):r>-1&&e.$set(e.service_optionnel,"impact_delai",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.service_optionnel,"impact_delai",s)}}}),e._v(" "),i("span"),e._v(" Impact sur le délai\n                ")])])]),e._v(" "),e.service_optionnel.impact_delai?i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6 pt-0"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Type")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.impacts_delai,clearable:"",dense:"",solo:""},model:{value:e.service_optionnel.impact_delai_type,callback:function(t){e.$set(e.service_optionnel,"impact_delai_type",t)},expression:"service_optionnel.impact_delai_type"}})],1)]),e._v(" "),i("div",{staticClass:"col-md-6 pt-0"},[i("label",{staticClass:"form-control-label",attrs:{for:"recipient-name"}},[e._v("Valeur :")]),e._v(" "),i("v-autocomplete",{attrs:{items:e.times,clearable:"",dense:"",solo:""},model:{value:e.service_optionnel.impact_delai_valeur,callback:function(t){e.$set(e.service_optionnel,"impact_delai_valeur",t)},expression:"service_optionnel.impact_delai_valeur"}})],1)]):e._e()],1),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.clearFormServiceOptionnel()}}},[e._v("Fermer")]),e._v(" "),i("button",{staticClass:"btn btn-primary spinner-light-success spinner-right",attrs:{type:"submit"},on:{click:function(t){return e.saveServiceOptionnel(t)}}},[e._v("Enregistrer")])])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("div",{staticClass:"card-title"},[t("h3",{staticClass:"card-label"},[this._v("Arborescence des rubriques")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"nav nav-tabs nav-tabs-line mb-5 pl-0"},[t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#kt_tab_pane_1"}},[t("span",{staticClass:"nav-icon"},[t("i",{staticClass:"flaticon2-chat-1"})]),this._v(" "),t("span",{staticClass:"nav-text"},[this._v("Informations")])])]),this._v(" "),t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#kt_tab_pane_2"}},[t("span",{staticClass:"nav-icon"},[t("i",{staticClass:"flaticon2-pie-chart-4"})]),this._v(" "),t("span",{staticClass:"nav-text"},[this._v("Questions")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"nav-icon"},[t("i",{staticClass:"far fa-flag"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"cancel","data-toggle":"tooltip",title:"Cancel avatar"}},[t("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"remove","data-toggle":"tooltip",title:"Remove avatar"}},[t("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"cancel","data-toggle":"tooltip",title:"Cancel avatar"}},[t("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"btn btn-xs btn-icon btn-circle btn-white btn-hover-text-primary btn-shadow",attrs:{"data-action":"remove","data-toggle":"tooltip",title:"Remove avatar"}},[t("i",{staticClass:"ki ki-bold-close icon-xs text-muted"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("i",{staticClass:"ki ki-close",attrs:{"aria-hidden":"true"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("i",{staticClass:"ki ki-close",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null);t.default=v.exports}}]);